# Spring学习记录
## IOC

在传统的应用程序中，对象的创建和依赖关系的管理往往是由应用程序自己负责的。比如说，当一个对象需要使用另一个对象时，它需要显式地创建一个新的对象并将其作为自己的一个成员变量来使用。这种方式虽然简单易懂，但是它往往会导致应用程序的耦合度过高，使得代码难以维护和测试。

为了解决这个问题，Spring 引入了 IOC（Inversion of Control，控制反转）容器，将对象的创建和依赖关系的管理交给了 Spring 容器来完成。IOC 容器是 Spring 框架的核心组件之一，它的作用是将应用程序中的对象和它们之间的依赖关系的管理从应用程序代码中解耦出来，使得应用程序代码更加简单、易于维护和测试。

在 Spring 的 IOC 容器中，我们将对象称为 Bean。每个 Bean 都有一个唯一的标识符，它可以是任意的字符串。当应用程序需要使用某个 Bean 时，它只需要向 IOC 容器发出请求即可，而不需要自己去创建 Bean 对象。IOC 容器在接收到请求后，会根据配置文件或者注解来创建对应的 Bean 对象，并将其返回给应用程序。在创建 Bean 对象的过程中，IOC 容器会自动解决 Bean 之间的依赖关系，从而使得应用程序更加简单、易于维护和测试。

总之，IOC 就是将对象的创建和依赖关系的管理交给容器来完成，从而使得应用程序更加简单、易于维护和测试。通过使用 IOC，我们可以使得应用程序的各个模块之间相互解耦，从而提高了代码的可维护性和可重用性。

### 解释
当 Spring 启动时，它会创建一个 ApplicationContext 对象作为 IOC 容器。在创建 ApplicationContext 对象时，Spring 会根据配置文件或者注解，扫描指定的包路径，并读取所有与 Spring 相关的注解，如 @Component、@Service、@Controller 等。Spring 会把扫描到的类，以及类中标注了相关注解的成员变量、方法等，统称为 Bean Definition。

Bean Definition 描述了 Bean 的信息，包括 Bean 类型、属性值、依赖关系等。Spring IOC 容器会把所有的 Bean Definition 存储在内存中，以便在需要的时候创建 Bean 实例。

当应用程序需要使用某个 Bean 时，它会向 IOC 容器发送请求。IOC 容器会先检查 Bean Definition，然后创建 Bean 的实例，并把依赖注入到 Bean 中。创建 Bean 的实例过程中，Spring 采用了反射机制，通过反射创建 Bean 实例，并且为 Bean 的属性赋值。属性值可以通过 setter 方法注入，也可以通过字段注入（使用 @Autowired、@Value 等注解）。如果某个 Bean 依赖其他的 Bean，则 IOC 容器会递归创建这些 Bean 并注入依赖。

Spring IOC 容器支持单例和原型两种 Bean 实例化方式。对于单例的 Bean，IOC 容器只会创建一次，并在之后的请求中返回同一个实例；而对于原型的 Bean，IOC 容器会每次请求都创建一个新的实例。

除了 Bean 的实例化和依赖注入，Spring IOC 容器还支持 AOP（面向切面编程）。在 AOP 中，可以通过注解或 XML 配置文件，定义切面、切入点和通知。Spring IOC 容器会在 Bean 实例化和依赖注入的过程中，自动织入切面和通知，以实现对 Bean 的增强。

总之，Spring IOC 容器是 Spring 框架的核心，它负责管理 Bean 的生命周期、依赖注入和 AOP 等功能，为开发者提供了一种方便、灵活和可扩展的编程模型。

## AOP
AOP（面向切面编程）是一种编程范式，它通过将横切关注点（如日志、事务、安全等）从业务逻辑中分离出来，将其作为独立的模块来开发和维护。AOP 的核心思想是将这些横切关注点定义成切面，然后通过将切面织入到应用程序的目标对象中来实现功能的增强。
### 解释
当我们在开发一个应用程序时，往往需要考虑很多问题，比如数据访问、事务控制、日志记录、异常处理等。这些问题虽然和业务逻辑无关，但是它们对系统的正常运行是至关重要的。如果这些问题和业务逻辑紧耦合在一起，那么当我们需要修改它们的时候，就会导致代码的复杂度增加，而且容易出错。

AOP（Aspect Oriented Programming）就是一种解决这种问题的编程思想。AOP 将这些横切关注点（如日志、事务、安全等）从业务逻辑中分离出来，将其作为独立的模块来开发和维护。AOP 的核心思想是将这些横切关注点定义成切面，然后通过将切面织入到应用程序的目标对象中来实现功能的增强。

为了更好地理解 AOP，我们可以把它比喻成电视机。电视机有一个主要的功能，就是播放电视节目。但是，除了播放电视节目之外，电视机还有很多辅助功能，比如调节音量、亮度、对比度等等。这些辅助功能并不影响电视节目的播放，但是它们对电视机的功能增强是至关重要的。如果我们把电视机比喻成应用程序，那么播放电视节目就是业务逻辑，而调节音量、亮度、对比度等辅助功能就是横切关注点。而把这些横切关注点定义成切面，然后通过将切面织入到应用程序的目标对象中来实现功能的增强，就相当于在电视机中添加了一些辅助功能，从而提高了电视机的使用效率和便捷性。

在 Spring 中，AOP 的实现方式是通过代理来实现的。Spring AOP 基于动态代理和字节码增强两种方式来实现代理。通过将切面织入到目标对象的方法执行前、后或者环绕执行时，来实现对目标对象方法的增强，从而实现横切关注点的统一处理。这样，我们就可以将业务逻辑和横切关注点分离开来，使得应用程序更加清晰、易于维护和复用。